<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>I Love U â€” Syifa Rahmadani</title>
<style>
html,body{margin:0;background:#000;overflow:hidden}
canvas{display:block}
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
(() => {
"use strict";

/* ================= CONFIG ================= */
const TARGET_W = 3840;
const TARGET_H = 2160;
const RENDER_SCALE = 1;   // 1 = full 4K, try 0.75 / 0.5 if lag
const FPS = 60;
const DURATION = 15;

/* ================= CANVAS ================= */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d",{alpha:false});

const W = Math.floor(TARGET_W * RENDER_SCALE);
const H = Math.floor(TARGET_H * RENDER_SCALE);
canvas.width=W; canvas.height=H;
canvas.style.width="100vw";
canvas.style.height="100vh";

const hdr=document.createElement("canvas");
hdr.width=W; hdr.height=H;
const h=hdr.getContext("2d");

const bloom=document.createElement("canvas");
bloom.width=W/4; bloom.height=H/4;
const b=bloom.getContext("2d");

/* ================= MATH ================= */
const TAU=Math.PI*2;
const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
const ease=x=>x<.5?4*x*x*x:1-Math.pow(-2*x+2,3)/2;

const heart=a=>({
 x:16*Math.sin(a)**3,
 y:-(13*Math.cos(a)-5*Math.cos(2*a)-2*Math.cos(3*a)-Math.cos(4*a))
});

/* ================= COLORS ================= */
const loveColor=t=>`rgb(${210+30*Math.sin(t)},${40+25*Math.sin(t+2)},${80+35*Math.sin(t+4)})`;
const goldColor=t=>`rgb(255,${190+25*Math.sin(t)},${120+20*Math.sin(t+2)})`;

/* ================= BACKGROUND ================= */
const dust=[...Array(1400)].map(()=>({
 a:Math.random()*TAU,
 r:120+Math.random()*720,
 s:0.0006+Math.random()*0.002,
 z:Math.random(),
 sz:0.6+Math.random()*1.8
}));

function drawDust(t){
 h.save(); h.translate(W/2,H/2); h.rotate(t*0.03);
 for(const d of dust){
  d.a+=d.s;
  h.beginPath();
  h.arc(
   Math.cos(d.a)*d.r*(0.5+d.z),
   Math.sin(d.a)*d.r*(0.4+d.z),
   d.sz*(0.6+d.z),0,TAU
  );
  h.fillStyle="rgba(180,80,220,.08)";
  h.fill();
 }
 h.restore();
}

/* ================= HEART CORE ================= */
function drawHeart(t,p){
 const k=ease(p);
 const pulse=(230+60*Math.sin(t))*k;
 const col=loveColor(t);

 for(let i=0;i<1500;i++){
  const a=i/1500*TAU+t*.25;
  const p2=heart(a);
  h.beginPath();
  h.arc(W/2+p2.x*pulse,H/2+p2.y*pulse,3.5,0,TAU);
  h.fillStyle=col;
  h.shadowColor=col;
  h.shadowBlur=36;
  h.fill();
 }
}

/* ================= FIREWORK ================= */
class Firework{
 constructor(){
  this.p=[]; this.e=[]; this.life=0;
  for(let i=0;i<600;i++){
   const a=i/600*TAU;
   const p=heart(a);
   this.p.push({
    x:W/2,y:H/2,
    vx:p.x*0.06,vy:p.y*0.06,l:120+Math.random()*60
   });
   if(i%3===0){
    this.e.push({
     x:W/2,y:H/2,
     vx:p.x*0.02+(Math.random()-.5),
     vy:p.y*0.02+(Math.random()-.5),
     l:260+Math.random()*120
    });
   }
  }
 }
 update(){
  this.life++;
  for(const p of this.p){p.x+=p.vx;p.y+=p.vy;p.vy+=.001;p.l--;}
  for(const e of this.e){e.x+=e.vx;e.y+=e.vy;e.vy+=.0016;e.l--;}
 }
 draw(t){
  for(const p of this.p){
   if(p.l<=0)continue;
   h.beginPath();
   h.arc(p.x,p.y,4.2,0,TAU);
   h.fillStyle="rgba(255,220,170,.95)";
   h.shadowColor="rgba(255,170,90,1)";
   h.shadowBlur=70;
   h.fill();
  }
  for(const e of this.e){
   if(e.l<=0)continue;
   h.beginPath();
   h.arc(e.x,e.y,2.6,0,TAU);
   h.fillStyle=`rgba(255,210,150,${e.l/380})`;
   h.shadowColor=goldColor(t);
   h.shadowBlur=45;
   h.fill();
  }
 }
 dead(){return this.life>260}
}

let fireworks=[];

/* ================= POST ================= */
function bloomPass(){
 b.clearRect(0,0,bloom.width,bloom.height);
 b.filter="brightness(1.9) contrast(1.25) blur(14px)";
 b.drawImage(hdr,0,0,W,H,0,0,bloom.width,bloom.height);
}

function composite(){
 ctx.clearRect(0,0,W,H);
 ctx.filter="brightness(1.1) contrast(1.24) saturate(1.28)";
 ctx.drawImage(hdr,0,0);
 ctx.globalCompositeOperation="screen";
 ctx.globalAlpha=1.12;
 ctx.drawImage(bloom,0,0,W,H);
 ctx.globalCompositeOperation="source-over";
 ctx.globalAlpha=1;
 const g=ctx.createRadialGradient(W/2,H/2,300,W/2,H/2,1400);
 g.addColorStop(0,"rgba(0,0,0,0)");
 g.addColorStop(1,"rgba(0,0,0,.6)");
 ctx.fillStyle=g; ctx.fillRect(0,0,W,H);
}

/* ================= TEXT ================= */
function drawText(p){
 ctx.save();
 ctx.globalAlpha=p;
 ctx.textAlign="center";
 ctx.textBaseline="middle";

 ctx.shadowColor="rgba(255,200,160,1)";
 ctx.shadowBlur=50;

 ctx.fillStyle="rgba(255,255,255,.92)";
 ctx.font=`800 ${90*RENDER_SCALE}px system-ui`;
 ctx.fillText("I Love U",W/2,H*0.74);

 ctx.shadowBlur=60;
 ctx.font=`900 ${170*RENDER_SCALE}px Georgia`;
 ctx.fillText("Syifa Rahmadani",W/2,H*0.82);

 ctx.shadowBlur=20;
 ctx.font=`600 ${22*RENDER_SCALE}px system-ui`;
 ctx.fillStyle="rgba(255,255,255,.55)";
 ctx.fillText("Dev by Tuan Muda Reza",W/2,H*0.82+105*RENDER_SCALE);

 ctx.restore();
}

/* ================= LOOP ================= */
let frame=0;
function loop(){
 const t=frame/FPS;

 // persistent clear
 h.fillStyle="rgba(0,0,0,.06)";
 h.fillRect(0,0,W,H);
 h.globalAlpha=.25;
 h.fillStyle="rgba(70,10,20,.35)";
 h.fillRect(0,0,W,H);
 h.globalAlpha=1;

 drawDust(t);

 if(t>2) drawHeart(t,clamp((t-2)/4,0,1));

 if(t>7&&t<12&&frame%90===0) fireworks.push(new Firework());
 fireworks.forEach(f=>{f.update();f.draw(t)});
 fireworks=fireworks.filter(f=>!f.dead());

 bloomPass();
 composite();

 if(t>12) drawText(ease((t-12)/2));

 frame++;
 if(frame<DURATION*FPS) requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
})();
</script>
</body>
</html>
