<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>SYIFA â€” Love Fireworks (4K)</title>
<style>
html,body{margin:0;background:#000;overflow:hidden}
canvas{display:block}
#rec{
 position:fixed;left:20px;top:20px;
 padding:10px 16px;border-radius:14px;
 background:rgba(0,0,0,.4);color:#fff;
 border:1px solid rgba(255,255,255,.12);
 cursor:pointer;font:600 14px system-ui
}
</style>
</head>
<body>
<canvas id="c"></canvas>
<button id="rec">Start 4K Recording</button>

<script>
(() => {
"use strict";

/* ================= CONFIG ================= */
const DURATION = 15;           // seconds
const FPS = 60;
const W = 3840, H = 2160;      // TRUE 4K
const NAME = "SYIFA";

/* ================= CANVAS ================= */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
canvas.width=W; canvas.height=H;

const hdr = document.createElement("canvas");
hdr.width=W; hdr.height=H;
const h = hdr.getContext("2d");

const bloom = document.createElement("canvas");
bloom.width=W/4; bloom.height=H/4;
const b = bloom.getContext("2d");

/* ================= MATH ================= */
const TAU=Math.PI*2;
const heart = a => ({
 x:16*Math.sin(a)**3,
 y:-(13*Math.cos(a)-5*Math.cos(2*a)-2*Math.cos(3*a)-Math.cos(4*a))
});

/* ================= FIREWORK ================= */
class Firework{
 constructor(x,y){
  this.x=x; this.y=y;
  this.t=0;
  this.parts=[];
  for(let i=0;i<420;i++){
   const a=i/420*TAU;
   const hrt=heart(a);
   this.parts.push({
    x:x,y:y,
    vx:hrt.x*0.045,
    vy:hrt.y*0.045,
    life:120+Math.random()*40
   });
  }
 }
 update(){
  this.t++;
  for(const p of this.parts){
   p.x+=p.vx;
   p.y+=p.vy;
   p.vy+=0.0006;
   p.life--;
  }
 }
 draw(){
  for(const p of this.parts){
   if(p.life<=0)continue;
   h.beginPath();
   h.arc(p.x,p.y,2.2,0,TAU);
   h.fillStyle="rgba(255,180,120,.9)";
   h.shadowColor="rgba(255,120,80,1)";
   h.shadowBlur=30;
   h.fill();
  }
 }
}

/* ================= SYSTEM ================= */
let fireworks=[];
let t=0;

function drawHeartCore(){
 const pulse=160+Math.sin(t*0.04)*40;
 for(let i=0;i<1200;i++){
  const a=i/1200*TAU+t*0.002;
  const hrt=heart(a);
  const x=W/2+hrt.x*pulse;
  const y=H/2+hrt.y*pulse;
  h.beginPath();
  h.arc(x,y,2,0,TAU);
  h.fillStyle="rgba(220,40,60,.8)";
  h.shadowColor="rgba(255,80,120,1)";
  h.shadowBlur=22;
  h.fill();
 }
}

function bloomPass(){
 b.clearRect(0,0,bloom.width,bloom.height);
 b.filter="blur(18px)";
 b.drawImage(hdr,0,0,bloom.width,bloom.height);
}

function composite(){
 ctx.clearRect(0,0,W,H);
 ctx.filter="contrast(1.25) saturate(1.3)";
 ctx.drawImage(hdr,0,0);
 ctx.globalCompositeOperation="screen";
 ctx.drawImage(bloom,0,0,W,H);
 ctx.globalCompositeOperation="source-over";
}

/* ================= TEXT ================= */
function drawText(){
 ctx.save();
 ctx.font="900 160px Playfair Display, serif";
 ctx.textAlign="center";
 ctx.fillStyle="rgba(255,255,255,.92)";
 ctx.shadowColor="rgba(255,180,120,1)";
 ctx.shadowBlur=40;
 ctx.fillText(NAME,W/2,H*0.82);
 ctx.restore();
}

/* ================= LOOP ================= */
function frame(){
 h.fillStyle="rgba(0,0,0,.15)";
 h.fillRect(0,0,W,H);

 drawHeartCore();

 if(t%180===0){
  fireworks.push(new Firework(W/2,H/2));
 }

 fireworks.forEach(f=>{f.update();f.draw();});
 fireworks=fireworks.filter(f=>f.t<160);

 bloomPass();
 composite();
 drawText();

 t++;
 if(t< DURATION*FPS) requestAnimationFrame(frame);
}

/* ================= RECORD ================= */
document.getElementById("rec").onclick=()=>{
 const stream=canvas.captureStream(FPS);
 const rec=new MediaRecorder(stream,{videoBitsPerSecond:25_000_000});
 const data=[];
 rec.ondataavailable=e=>data.push(e.data);
 rec.onstop=()=>{
  const blob=new Blob(data,{type:"video/webm"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="SYIFA_LOVE_4K.webm";
  a.click();
 };
 rec.start();
 frame();
 setTimeout(()=>rec.stop(),DURATION*1000);
};
})();
</script>
</body>
</html>
